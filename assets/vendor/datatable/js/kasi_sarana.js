$(document).ready( function () {
    $('.home-myTable').DataTable();

    $('.list-myData').DataTable( {
        dom: 'Bfrtip',
        buttons: [
            'pageLength' 
            ,{
                extend: 'excelHtml5',
            }
            ,{
                extend: 'pdfHtml5',
            }
            ,{
                extend: 'print',
            }
        ],
    } );

    var table = $('#list-user').DataTable( {
        dom: 'Bfrtip',
        lengthMenu: [
            [ 10, 25, 50, -1 ],
            [ '10 rows', '25 rows', '50 rows', 'Show all' ]
        ],
        buttons: [
            'pageLength' 
            ,{
                extend: 'excelHtml5',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
            ,{
                extend: 'pdfHtml5',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
            ,{
                extend: 'print',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
        ],
        "processing": true,
        "serverSide": true,
        "searchDelay": 350,
        "order": [[0, "asc" ]],
        "ajax": {
            url :  base_url+controller+'/list_user_datatables',
            type : 'GET',
            data: function ( d ) {
                return $.extend( {}, d, {
                  "jabatan": $('#jabatan').val(),
                  "sektor": $('#sektor').val(),
                  "pos": $('#penugasan').val()
                } )
        },
        
    } } );

    $('#jabatan').change(function (e) {
        table.draw();
    });

    $('#sektor').change(function (e) {
        table.draw();
    });

    $('#penugasan').change(function (e) {
        table.draw();
    });

    /**$('.list-pegawai').DataTable( {
        dom: 'Bfrtip',
        lengthMenu: [
            [ 10, 25, 50, -1 ],
            [ '10 rows', '25 rows', '50 rows', 'Show all' ]
        ],
        buttons: [
            'pageLength' 
            ,{
                extend: 'excelHtml5',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
            ,{
                extend: 'pdfHtml5',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
            ,{
                extend: 'print',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
        ],
        "processing": true,
        "serverSide": true,
        "searchDelay": 350,
        "order": [[0, "asc" ]],
        "ajax": {
            url :  base_url+'admin_sektor/list_gedung_datatables',
            type : 'GET'
        },
        columnDefs: [
            {bSortable: false, targets: [6,7,8]} 
          ],
        
    } );

    $('#list-petugas123').DataTable( {
        initComplete: function () {
            this.api().columns([4, 5, 6, 7, 8]).every( function () {
                var column = this;
                var select = $('<select><option value="">Semua</option></select>')
                    .appendTo( $(column.footer()).empty() )
                    //.appendTo( $(column.header()) )
                    .on( 'change', function () {
                        var val = $.fn.dataTable.util.escapeRegex(
                            $(this).val()
                        );
 
                        column
                            .search( val ? '^'+val+'$' : '', true, false )
                            .draw();
                    } );
 
                column.data().unique().sort().each( function ( d, j ) {
                    //select.append( '<option value="'+d+'">'+d+'</option>' )
                    select.append('<option value="' + d + '">' + d.substr(0,30) + '</option>')
                } );
            } );
        },
        "columnDefs": [ {
            "searchable": false,
            "orderable": false,
            "targets": 0
        },
        {
            "orderable": false,
            "targets": [2,3],
         },
         { "width": "5px", "targets": 0 }
        ],
        "order": [[ 1, "asc" ]],
        dom: 'Bfrtip',
        buttons: [
            'pageLength' 
            ,{
                extend: 'excelHtml5',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8, 9]},
                title: 'Daftar Petugas --generated by eAPD'
            }
            ,{
                extend: 'pdfHtml5',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]},
                title: 'Daftar Petugas --generated by eAPD'
            }
            ,{
                extend: 'print',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]},
                title: 'Daftar Petugas --generated by eAPD'
            }
        ],
        fixedColumns:   {
            left: 3
        }
    } );*/

    
    var table_report_detail = $('#detail-report').DataTable( {
        dom: 'Brtip',
        lengthMenu: [
            [ 10, 25, 50, -1 ],
            [ '10 rows', '25 rows', '50 rows', 'Show all' ]
        ],
        buttons: [
            'pageLength' 
            ,{
                extend: 'excelHtml5',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
            ,{
                extend: 'pdfHtml5',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
            ,{
                extend: 'print',
                exportOptions: {
                    columns: [ 1, 2, 3, 4, 5, 6, 7, 8 ]},
                title: 'Daftar Pegawai --generated by eAPD'
            }
        ],
        "processing": true,
        "serverSide": true,
        "searchDelay": 350,
        "order": [[0, "asc" ]],
        "ajax": {
            url :  base_url+controller+'/report_detail_datatables',
            type : 'GET',
            data: function ( d ) {
                return $.extend( {}, d, {
                    "jenisAPD": $('#jenisAPD').val(),
                    "sektor": $('#sektor').val(),
                    "pos": $('#penugasan').val()
                } )
        },
        
    } } );

    $('#jenisAPD').change(function (e) {
        table_report_detail.draw();
    });

    $('#sektor').change(function (e) {
        $('#penugasan').val('all').trigger('change');
    });

    $('#penugasan').change(function (e) {
        table_report_detail.draw();
    });

} );
